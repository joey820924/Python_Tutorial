# 數值資料

## 資料型態

Python3中的數值型態有三種：  
1. 整數\(int\)  
2. 布林\(boolean\)  
2. 浮點數\(float\)  
3. 複數\(complex\)

#### 整數

在Python3中，整數並無分為整數與長整數，長度並無限制\(但在硬體限制內\)。整數的進位制整理如下

```
//十進位，為預設進位
10

//二進制，每位數值由0或1組成
0b1010 or bin(10)

//八進制，每位數值由0~7組成
0o12 or oct(10)

//十六進制，每位數值由0~7 A~F組成
oxa or hex(10)
```

其中無論是十進制、二進制亦或是十六進制，型態都是int。  
  
除此之外，亦可使用字串來宣告整數，如下。

```text
//十進位
int('10')

//二進制
int('10',2)

//八進制
int('10',8)

//十六進制
int('10',16)
```

#### 布林

可用於表達True與False的數值，型態為bool，bool為int的子類別，0為False，1為True。在Python中，不是0就是True，所以空字串、空串列、None也都為False。

```text
//可用bool來指定型態
bool方法中傳入值只要非0或空資料，則都為True
bool(0) == False
bool({}) == False
bool('1') == True
```

#### 浮點數

可用於表達有小數位的數值，型態為float。  
另外，亦可使用科學表示法表示，如下。

```text
//數值為250.0，e為十次方，因此e2代表100。
//e也可以用E表示
2.5e2
//可用float()方法來指定型態
float(2) == 2.0
```

#### 複數

可用於表達複數，型態為complex。

```text
//可用j來代表虛數
2+5j
//可用complex(x,y)方法來建立複數，若未傳入y，則虛部則為0j
complex(2,3) == 2+3j
complex(2) == 2+0j
```

## 數值運算

| 運算符號 | 功用 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| + | 加法 |
| - | 減法 |
| \* | 乘法 |
| / | 除法 |
| // | 整除 |
| \*\* | 次方運算 |
| % | 模運算\(取餘數\) |

> 若運算的數值有浮點數，則得出的結果亦會是浮點數。  
> 另外，運算的優先順序也與基本數學的相同。

#### 浮點數精度問題

浮點數在計算的一個問題是其無法表達精確的數值，其原因是因底層的CPU和IEEE 754標準所導致的計算誤差。

```text
>>> 1.0-0.8
0.19999999999999996
```

若想顯示精確的數值\(但要容忍些微的性能降低\)，可使用decimal模塊：

```text
from decimal import Decimal
//結果為'0.2'
print(Decimal('1.0')-Decimal('0.8'))
```

\_\_repr\_\_ vs. \_\_str\_\_

在指令互動環境中，所使用的是repr\(\)函式來顯示運算結果，其採用正式\(official\)的顯示方式，是對於解釋器較好解讀的方式。而print\(\)函式則使用str\(\)函式來顯示較非正式\(unofficial\)的顯示方式，是對於使用者較好解讀的方式。  
  
簡單說，repr\(\)函式是來自於 \_\_repr\_\_物件所產生的字串格式，所回傳的是沒有歧義的字串表示\(Unambigous\)。而str\(\)函式則是來自於 \_\_str\_\_物件所產生的字串格式，所回傳的是可讀式的字串表示\(Readable\)。

> 在Python中，底線開頭的是暗示說直接呼叫或直接使用。除此之外，其實可以自定義\_\_str\_\_與 \_\_repr\_\_，讓其客製化產生你所想要顯示的格式。

由下圖可以發現，當傳入整數時，str\(\)與repr\(\)並無差異，然而若傳入字串時，repr\(\)會多出兩個雙引號，若想要重新建置Object，應使用eval\(\)函式。

> eval函式的功用是接收字串格式，並將當作一段Python的程式碼執行產生內容。

```text
>>> str('Hello World')
'Hello World'
>>> repr('Hello World')
'"Hellow World"'
```

由下圖可發現，str\(\)函式會計算並回傳傳入值內容的字串格式，而repr\(\)函式則會回傳可以產生相應Object的Python程式碼之字串格式，需用eval\(\)函式來得到內容。

```text
>>> import datetime
>>> currentTime = datetime.datetime.now()
>>> str(currentTime)
'2018-05-11 17:31:53.557488'
>>> repr(currentTime)
'datetime.datetime(2018, 5, 11, 17, 31, 53, 557488)'
>>> eval(repr(currentTime))
datetime.datetime(2018, 5, 11, 17, 31, 53, 557488)
```

在Python3中，你會發現當傳入特定浮點數運算結果時，str\(\)與repr\(\)所產生出的結果會是一樣的，

```text
>>> 1.0-0.8
0.19999999999999996
>>> repr(1.0-0.8)
'0.19999999999999996'
>>> str(1.0-0.8)
```

